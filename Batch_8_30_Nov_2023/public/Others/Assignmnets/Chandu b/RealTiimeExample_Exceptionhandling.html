<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Realtime Exception handling</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <style>
            h3 {
                text-align: center;
                color: green;
            }
            .thanksBlock {
                position: absolute;
                left: 40%;
                bottom: 30px;
                border: 1px solid rgb(22, 14, 0);
                background-color: aquamarine;
                width: 200px;
                text-align: center;
                padding: 40px;
                font-weight: bold;
                border-radius: 10px;
                color: rgb(255, 217, 0);
                display: none;
            }
            #taskContainer {
                margin: 50px auto;
                border: 2px solid;
                width: 400px;
                padding: 50px 10px;
                border-radius: 10px;
                background-color: aquamarine;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <h3>
            Realtime Exception Handling
        </h3>
        <input type="text" placeholder="Enter username" id="username">
        <input type="button" value="Save" onclick="Saveusername()" class="btn btn-outline-primary">
        <input type="button" value="Create Task Container" onclick="createTaskContainer()" class="btn btn-outline-success">
        <input type="button" value="Show my Task for today" onclick="showTaskForToday()" class="btn btn-outline-danger">
        <div class="mainContainer"></div>
        <div class="thanksBlock"></div>
        <script>
            var taskList = [
                    "Do the code review of project",
                    "Create new module for login app",
                    "Create all JIRa tickets for App chagnes",
                    "Upgrade the version of java and node to latest",
                    "Create CR or new release for this month"
            ];

            var username = '';
            var Saveusername = () => {
                userName = $("#username").val();
                $("#username").val('');
            }

            var createTaskContainer = () => {
                    // var divTag = document.createElement("div");
                    var divTag = $("<div/>");
                    divTag.attr("id", 'taskContainer');
                    $(".mainContainer").html('');
                    $(".mainContainer").append(divTag);
            }

            var showTaskForToday = () => {
                var randomIndex = Math.floor(Math.random() * taskList.length);
                    try {
                        var task = taskList[randomIndex];
                        document.querySelector("#taskContainer").innerText = task;
                    } catch(e) {
                        console.log(e)
                        alert("error while finding the task block, please crete and try again")
                    } finally {
                        setTimeout(() => {
                            showThanksMsg();
                        }, 3000); 
                    }
            }

            var showThanksMsg = () => {
                var msg = `Thanks for visit our web MR. ${username}`;
                $(".thanksBlock").text(msg)
                $(".thanksBlock").show(2000);
            }
        </script>
    </body>
</html>